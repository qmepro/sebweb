webpackJsonp([0xd65251be9303],{66:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return e.raw=t,e}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=u(["\n  opacity: ",";\n  text-transform: capitalize;\n"],["\n  opacity: ",";\n  text-transform: capitalize;\n"]),d=n(1),h=a(d),f=n(6),p=a(f),m=n(2),_=n(13),b=n(49),g=a(b),y=n(68),v=a(y),w=n(37),E=m.Link.withComponent(p.default).extend(c,function(e){return"true"===e.active?.8:1}),k=function(e){function t(n){o(this,t);var a=l(this,e.call(this,n));return a.state={path:[]},a}return i(t,e),t.prototype.componentDidMount=function(){this.setState({path:location.pathname.split("/").slice(1)})},t.prototype.render=function(){var e=this.state.path,t=[""];return h.default.createElement(d.Fragment,null,e.map(function(n,a){t.push(n);var r=e.length-a>1;return h.default.createElement(d.Fragment,null,h.default.createElement(E,{color:"white",to:t.join("/"),active:r.toString()},n),r?h.default.createElement(m.Text.span,{mx:2,color:"white",regular:!0,children:"›"}):null)}))},t}(d.Component),x=(0,w.withRouter)(k);_.Item.box=_.Item.withComponent(m.Box);var S=function(e){var t=e.breadcrumb,n=void 0===t||t,a=r(e,["breadcrumb"]);return h.default.createElement(m.Flex,s({bg:"primary",px:[2,4],pb:2,justify:"space-between",align:"center",w:1,style:{position:"relative"}},a),h.default.createElement(g.default,null),n?h.default.createElement(_.Item.box,{f:[2,4],mt:2,w:512},h.default.createElement(x,null)):null,h.default.createElement(v.default,{mt:2}))};t.default=S,e.exports=t.default},119:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.clubApplicationSchema=void 0;var r=n(1),o=a(r),l=n(8),i=n(16),u=n(2),s=n(14),c=n(6),d=a(c),h=n(24),f=a(h);t.clubApplicationSchema=f.default.object().shape({high_school_name:f.default.string().required(),high_school_type:f.default.string().notOneOf(["select"]).required(),high_school_address:f.default.string().required(),leaders_team_origin_story:f.default.string().required(),progress_general:f.default.string().required(),progress_student_interest:f.default.string().required(),progress_meeting_yet:f.default.string().required(),idea_why:f.default.string().required(),idea_other_coding_clubs:f.default.string().required(),idea_other_general_clubs:f.default.string().required(),formation_registered:f.default.string().required(),other_surprising_or_amusing_discovery:f.default.string().required(),point_of_contact_id:f.default.string().notOneOf(["select"]).required()});u.LargeButton.link=u.LargeButton.withComponent(d.default);var p=function(e){var t=e.values,n=e.errors,a=e.touched,r=e.handleChange,l=e.handleBlur,s=e.handleSubmit,c=e.isSubmitting;e.id,e.authToken;return o.default.createElement(i.FormWrapper,null,o.default.createElement(i.Form,{onSubmit:s},o.default.createElement(i.Fieldset,{section:"school"},o.default.createElement(i.Field,{name:"high_school_name",label:"Name of high school",onChange:r,onBlur:l,value:t.high_school_name,error:a.high_school_name&&n.high_school_name,disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"high_school_url",label:"Link to your high school’s website, if any",onChange:r,onBlur:l,value:t.high_school_url,error:a.high_school_url&&n.high_school_url,disabled:null!==t.submitted_at,optional:!0}),o.default.createElement(i.Field,{name:"high_school_type",label:"Type of school",type:"select",onChange:r,onBlur:l,value:t.high_school_type||"select",error:a.high_school_type&&n.high_school_type,disabled:null!==t.submitted_at},o.default.createElement("option",{disabled:!0,value:"select"},"Select One"),o.default.createElement("option",{value:"public_school"},"Public school"),o.default.createElement("option",{value:"private_school"},"Private school"),o.default.createElement("option",{value:"charter_school"},"Charter school")),o.default.createElement(i.Field,{name:"high_school_address",label:"High school’s full address",hint:"Please include city, state / province, country, and postal code (if available).",onChange:r,onBlur:l,value:t.high_school_address,error:a.high_school_address&&n.high_school_address,type:"textarea",disabled:null!==t.submitted_at})),o.default.createElement(i.Fieldset,{section:"leaders"},o.default.createElement(i.Field,{name:"point_of_contact_id",label:"Point of contact",hint:"To reduce emails, we just send emails to this designated person on your team.",onChange:r,onBlur:l,value:t.point_of_contact_id||"select",error:a.point_of_contact_id&&n.point_of_contact_id,type:"select",disabled:null!==t.submitted_at},o.default.createElement("option",{disabled:!0,value:"select"},"Select One"),t.leader_profiles.map(function(e,t){return o.default.createElement("option",{value:e.user.id,key:t},e.user.email)})),o.default.createElement(i.Field,{name:"leaders_team_origin_story",label:"How long have you known your other club leaders and how did you meet?",onChange:r,onBlur:l,value:t.leaders_team_origin_story,error:a.leaders_team_origin_story&&n.leaders_team_origin_story,type:"textarea",disabled:null!==t.submitted_at})),o.default.createElement(i.Fieldset,{section:"progress"},o.default.createElement(i.Field,{name:"progress_general",label:"How far along are you in starting your club?",onChange:r,onBlur:l,value:t.progress_general,error:a.progress_general&&n.progress_general,type:"textarea",disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"progress_student_interest",label:"Have you already polled for interest at your school? Are students interested? If you’ve already had meetings, how many people came?",onChange:r,onBlur:l,value:t.progress_student_interest,error:a.progress_student_interest&&n.progress_student_interest,type:"textarea",disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"progress_meeting_yet",label:"Have you begun meeting yet? If not, we encourage you to not begin meeting until we accept you.",onChange:r,onBlur:l,value:t.progress_meeting_yet,error:a.progress_meeting_yet&&n.progress_meeting_yet,type:"textarea",disabled:null!==t.submitted_at})),o.default.createElement(i.Fieldset,{section:"idea"},o.default.createElement(i.Field,{name:"idea_why",label:"Why did you decide to start a Hack Club? Have you ran anything like a Hack Club before? Why do you think the club is going to work?",onChange:r,onBlur:l,value:t.idea_why,error:a.idea_why&&n.idea_why,type:"textarea",disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"idea_other_coding_clubs",label:"Has your school had coding clubs before? What’s going to be new about your Hack Club?",onChange:r,onBlur:l,value:t.idea_other_coding_clubs,error:a.idea_other_coding_clubs&&n.idea_other_coding_clubs,type:"textarea",disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"idea_other_general_clubs",label:"What other clubs exist at your school? Why will you be just as successful, if not more, than them?",onChange:r,onBlur:l,value:t.idea_other_general_clubs,error:a.idea_other_general_clubs&&n.idea_other_general_clubs,type:"textarea",disabled:null!==t.submitted_at})),o.default.createElement(i.Fieldset,{section:"formation"},o.default.createElement(i.Field,{name:"formation_registered",onChange:r,onBlur:l,value:t.formation_registered,error:a.formation_registered&&n.formation_registered,label:"Have you already registered your club with your school?",disabled:null!==t.submitted_at}),o.default.createElement(i.Field,{name:"formation_misc",label:"Please provide any other relevant information about the structure or formation of the club.",onChange:r,onBlur:l,value:t.formation_misc,error:a.formation_misc&&n.formation_misc,type:"textarea",disabled:null!==t.submitted_at,optional:!0})),o.default.createElement(i.Fieldset,{section:"other"},o.default.createElement(i.Field,{name:"other_surprising_or_amusing_discovery",label:"What is something surprising or amusing you discovered?",hint:"Surprise us ;)",onChange:r,onBlur:l,value:t.other_surprising_or_amusing_discovery,error:a.other_surprising_or_amusing_discovery&&n.other_surprising_or_amusing_discovery,type:"textarea",disabled:null!==t.submitted_at})),o.default.createElement(i.Fieldset,{section:"curious"},o.default.createElement(i.Field,{name:"curious_what_convinced",label:"What convinced you to start a Hack Club?",onChange:r,onBlur:l,value:t.curious_what_convinced,error:a.curious_what_convinced&&n.curious_what_convinced,type:"textarea",disabled:null!==t.submitted_at,optional:!0}),o.default.createElement(i.Field,{name:"curious_how_did_hear",label:"How did you hear about Hack Club?",onChange:r,onBlur:l,value:t.curious_how_did_hear,error:a.curious_how_did_hear&&n.curious_how_did_hear,type:"textarea",disabled:null!==t.submitted_at,optional:!0})),o.default.createElement(i.AutoSaver,{handleSubmit:s,isSubmitting:c,values:t}),o.default.createElement(Heading.h4,{align:"center"},"Your form is automatically saved ✨"),o.default.createElement(u.Container,null,o.default.createElement(u.LargeButton.link,{to:"/apply"},"« Back"))))},m=(0,s.withFormik)({mapPropsToValues:function(e){return e.params},handleSubmit:function(e,t){var n=t.setSubmitting,a=t.props;t.resetForm;fetch(l.api+"/v1/new_club_applications/"+a.id,{method:"PATCH",headers:{Authorization:"Bearer "+a.authToken,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){n(!1)}).catch(function(e){console.error(e),alert(e),n(!1)})},displayName:"ClubApplicationForm"})(p);t.default=m},291:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(1),u=a(i),s=n(8),c=n(16),d=n(2),h=n(24),f=a(h),p=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a.state={errors:void 0},a}return l(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.id,a=t.authToken,r=t.callback,o=this.state.error,l=function(e){13===e.keyCode&&(e.preventDefault(),h())},h=function(){var t=document.querySelector("#leader_invite"),o=f.default.object().shape({email:f.default.string().required("required").email("email")});o.validate({email:t.value}).then(function(o){e.setState({error:void 0}),fetch(s.api+"/v1/new_club_applications/"+n+"/add_user",{method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){alert("Invite sent to "+o.email+"!"),t.value="",r()}).catch(function(t){console.error(t.errors),e.setState({error:t.statusText})})}).catch(function(t){"required"===t.type||("email"===t.message?e.setState({error:"Invalid email address"}):e.setState({error:"Something went terribly wrong"}))})};return u.default.createElement(d.Flex,{align:"flex-end",mb:3},u.default.createElement(c.Field,{id:"leader_invite",onKeyDown:l,placeholder:"Co-leader's email",error:o,hint:u.default.createElement(i.Fragment,null,"Still deciding who will be on your team?"," ",u.default.createElement(d.Link,{href:"https://github.com/hackclub/hackclub/blob/master/clubs/leadership_preface.md",target:"_blank"},"Consider this"),".")}),u.default.createElement(d.IconButton,{name:"add",bg:"success",color:"white",size:24,ml:3,p:1,mb:2,circle:!0,onClick:h,style:{flexShrink:"none"}}))},t}(i.Component);t.default=p,e.exports=t.default},293:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=n(1),u=a(i),s=n(48),c=a(s),d=n(2),h=n(119),f=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a.state={readyToSubmit:!1,submitted:!1},a.handleSubmit=a.handleSubmit.bind(a),a}return l(t,e),t.prototype.componentWillMount=function(){var e=this.props.application,t=!e.leader_profiles.some(function(e){return null===e.completed_at}),n=h.clubApplicationSchema.isValidSync(e),a=null===e.submitted_at;t&&n&&a&&this.setState({readyToSubmit:!0}),e.submitted_at&&this.setState({submitted:!0})},t.prototype.handleSubmit=function(){var e=this,t=this.props,n=t.authToken,a=t.application,r=this.state,o=r.readyToSubmit,l=r.submitted;return l||!o?null:void c.default.post("v1/new_club_applications/"+a.id+"/submit",{authToken:n}).then(function(){alert("Your application has been submitted!"),e.setState({submitted:!0})}).catch(function(e){alert(e.statusText)})},t.prototype.render=function(){var e=this.state,t=e.readyToSubmit,n=e.submitted;return u.default.createElement(d.LargeButton,{onClick:this.handleSubmit,bg:t?"success":"primary",disabled:n||!t,w:1,mb:2},n?"We’ve recieved your application":"Submit your application")},t}(i.Component);t.default=f,e.exports=t.default},303:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return e.raw=t,e}t.__esModule=!0;var u=i(["\n  :hover {\n    text-decoration: underline;\n  }\n"],["\n  :hover {\n    text-decoration: underline;\n  }\n"]),s=i(["\n  ul {\n    padding-left: 0;\n  }\n"],["\n  ul {\n    padding-left: 0;\n  }\n"]),c=n(1),d=a(c),h=n(9),f=a(h),p=n(8),m=n(2),_=n(66),b=a(_),g=n(291),y=a(g),v=n(67),w=a(v),E=n(293),k=a(E),x=n(65),S=a(x),C=n(44),T=a(C),F=n(6),O=a(F);m.LargeButton.link=m.LargeButton.withComponent(O.default);var j=m.Link.extend(u),B=function(e){for(var t=Math.floor((new Date-new Date(e))/1e3),n=[[Math.floor(t/604800),"weeks"],[Math.floor(t/86400),"days"],[Math.floor(t/3600),"hours"],[Math.floor(t/60),"minutes"]],a=0;a<n.length;a++){var r=n[a];if(r[0]>1)return r.join(" ")}return"less than a minute"},A=function(){return d.default.createElement(m.Text.span,{color:"error",bold:!0,children:"NOT"})},P=m.Card.extend(s),I=function(e){var t=e.app,n=t.id,a=t.leader_profiles,r=t.updated_at,o=t.created_at,l=t.submitted_at,i=e.authToken,u=e.callback,s=e.app,c=a.find(function(t){return t.user.id==e.userId}),h=a.filter(function(t){return t.user.id!=e.userId});return d.default.createElement(m.Container,{maxWidth:36,mt:3,p:3},d.default.createElement(m.Flex,{align:"center",justify:"center",flexDirection:["column","row"],mx:[null,-2]},d.default.createElement(m.LargeButton.link,{w:1,m:2,inverted:!0,to:"/apply/club?id="+n,children:"Edit Application"}),d.default.createElement(m.LargeButton.link,{w:1,m:2,inverted:!0,to:"/apply/leader?id="+c.id,children:"Edit Leader Profile"})),d.default.createElement(m.Flex,{mt:2,mb:4},d.default.createElement(k.default,{authToken:i,application:s})),d.default.createElement(P,{boxShadowSize:"md",p:[3,4],color:"black",bg:"snow"},d.default.createElement(m.Text,null,"You only need a team to apply. Invite them:"),d.default.createElement(y.default,{id:n,authToken:i,callback:u}),d.default.createElement(m.Text,null,"After you submit your application:"),d.default.createElement("ul",null,d.default.createElement("li",null,"We’ll get back to you with our decision in 3 days"),d.default.createElement("li",null,"If you’re accepted, we’ll schedule a call to train you to lead your club"),d.default.createElement("li",null,"We’ll give you access to our curriculum, a template for your meetings, and our online community of club leaders"),d.default.createElement("li",null,"Once you start holding meetings, we’ll check in with you each week to make sure everything is going well")),d.default.createElement("p",null,"Contact us at ",d.default.createElement(j,{href:"mailto:team@hackclub.com"},"team@hackclub.com")," ","if you have any questions while applying."),d.default.createElement("ul",null,d.default.createElement("li",null,"This application was"," ",null!==l?"submitted":r===o?"created":"updated"," ",B(r)," ago"),d.default.createElement("li",null,"You have ",c.completed_at?null:d.default.createElement(A,null)," finished your leader profile"),h.map(function(e,t){return d.default.createElement("li",{key:t},d.default.createElement("strong",null,e.user.email," "),e.completed_at?null:d.default.createElement("span",null,"has ",d.default.createElement(A,null)," "),"finished their leader profile")})),d.default.createElement(m.Text,{color:"slate",f:1},d.default.createElement("em",null,"* We also accept applications from clubs that have already held meetings."))))},H=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a.state={status:"loading",app:void 0,authToken:void 0,userId:void 0},a.populateApplications=a.populateApplications.bind(a),a}return l(t,e),t.prototype.populateApplications=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.authToken,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.userId;(0,T.default)(p.api+"/v1/users/"+n+"/new_club_applications",{headers:{Authorization:"Bearer "+t}}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){return 0===e.length?(0,T.default)(p.api+"/v1/users/"+n+"/new_club_applications",{method:"POST",headers:{Authorization:"Bearer "+t}}).then(function(e){if(e.ok)return e.json();throw e}):e.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)})[0]}).then(function(t){e.setState({status:"finished",app:t})}).catch(function(t){console.error(t),401===t.status&&e.setState({status:"needsToAuth"})})},t.prototype.componentDidMount=function(){var e=window.localStorage.getItem("authToken"),t=window.localStorage.getItem("userId");this.setState({authToken:e,userId:t});var n=null===e||null===t;n?this.setState({status:"needsToAuth"}):this.populateApplications(e,t)},t.prototype.content=function(){var e=this.state,t=e.app,n=e.status,a=e.authToken,r=e.userId;switch(n){case"needsToAuth":return d.default.createElement(w.default,null);case"loading":return d.default.createElement(S.default,null);case"finished":return d.default.createElement(c.Fragment,null,d.default.createElement(b.default,{breadcrumb:0}),d.default.createElement(m.Heading.h1,{bg:"primary",color:"white",f:[5,6],mt:-1,py:4,px:3,align:"center"},"Apply to Hack Club"),d.default.createElement(I,{app:t,userId:r,authToken:a,callback:this.populateApplications}));default:return d.default.createElement(m.Text,null,"Something terrible has happened.")}},t.prototype.render=function(){return d.default.createElement(m.ThemeProvider,null,d.default.createElement(f.default,{title:"Apply – Hack Club"}),this.content())},t}(c.Component);t.default=H,e.exports=t.default}});
//# sourceMappingURL=component---src-pages-apply-index-js-d87facb6354e5d9f69d6.js.map